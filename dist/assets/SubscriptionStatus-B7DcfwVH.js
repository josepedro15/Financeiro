import{c as L,j as e,d as S}from"./ui-REgLbvYD.js";import{l as F,u as G,a as B,B as m,d as h,e as g,f as j,h as N,g as O,C as H}from"./index-DSryXZ3F.js";import{u as X}from"./useSubscription-FgK73XAj.js";import{r as b}from"./vendor-CZTyH7vC.js";import{A as z}from"./arrow-left-BhEoN-6G.js";import{A as C}from"./arrow-up-right-Mr0PnFHi.js";import{C as y}from"./crown-DAa34y8n.js";import{C as q}from"./calendar-BvC3S1jB.js";import{F as v}from"./file-text-Cex2k-yX.js";import{C as J}from"./credit-card-B6tUvQDe.js";import{U as A}from"./users-Cj9EAxvB.js";import{C as K}from"./clock-BZLRJXud.js";import{T as Q}from"./triangle-alert-Dc0U7ASu.js";import"./supabase-DfbQpoin.js";import"./charts-DE-LwN1H.js";var w="Progress",W=100,[Y,je]=L(w),[Z,ee]=Y(w),I=b.forwardRef((s,a)=>{const{__scopeProgress:t,value:r=null,max:n,getValueLabel:l=se,...u}=s;(n||n===0)&&_(n);const i=_(n)?n:W;r!==null&&$(r,i);const o=$(r,i)?r:null,d=p(o)?l(o,i):void 0;return e.jsx(Z,{scope:t,value:o,max:i,children:e.jsx(S.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":p(o)?o:void 0,"aria-valuetext":d,role:"progressbar","data-state":M(o,i),"data-value":o??void 0,"data-max":i,...u,ref:a})})});I.displayName=w;var T="ProgressIndicator",E=b.forwardRef((s,a)=>{const{__scopeProgress:t,...r}=s,n=ee(T,t);return e.jsx(S.div,{"data-state":M(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:a})});E.displayName=T;function se(s,a){return`${Math.round(s/a*100)}%`}function M(s,a){return s==null?"indeterminate":s===a?"complete":"loading"}function p(s){return typeof s=="number"}function _(s){return p(s)&&!isNaN(s)&&s>0}function $(s,a){return p(s)&&!isNaN(s)&&s<=a&&s>=0}var R=I,ae=E;const x=b.forwardRef(({className:s,value:a,...t},r)=>e.jsx(R,{ref:r,className:F("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:e.jsx(ae,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));x.displayName=R.displayName;function Ne(){const{user:s}=G(),{subscription:a,usage:t,isTrialActive:r,getTrialDaysLeft:n,isMasterUser:l,getPlanName:u,currentPlan:i,loading:o}=X(),d=B();if(o)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando status da assinatura..."})]})});const U=()=>l?"bg-gradient-to-r from-purple-500 to-indigo-500":r()?"bg-gradient-to-r from-blue-500 to-cyan-500":a?.status==="active"?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-gray-500 to-slate-500",k=()=>l?e.jsx(y,{className:"w-5 h-5"}):r()?e.jsx(K,{className:"w-5 h-5"}):a?.status==="active"?e.jsx(H,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"}),V=()=>l?"Conta Master":r()?`Trial Gratuito - ${n()} dias restantes`:a?.status==="active"?`Plano ${u(i)} Ativo`:"Sem assinatura ativa",f=(D,P)=>P===0?0:Math.min(D/P*100,100),c=()=>{if(l)return{transactions:999999,users:999999,clients:999999};if(r())return{transactions:100,users:1,clients:10};switch(a?.plan_type){case"starter":return{transactions:100,users:1,clients:10};case"business":return{transactions:1e3,users:3,clients:50};default:return{transactions:100,users:1,clients:10}}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(m,{variant:"ghost",onClick:()=>d("/dashboard"),children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Voltar ao Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Status da Assinatura"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie sua conta e planos"})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(h,{children:[e.jsx(g,{children:e.jsx(j,{children:"Status da Assinatura"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:`${U()} text-white p-4 rounded-lg flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[k(),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:V()}),e.jsx("p",{className:"text-sm opacity-90",children:s?.email})]})]}),!l&&e.jsxs(m,{variant:"secondary",size:"sm",onClick:()=>d("/subscription"),children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),"Upgrade"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx(y,{className:"w-5 h-5 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plano Atual"}),e.jsx("p",{className:"font-semibold",children:u(i)})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx(q,{className:"w-5 h-5 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Próxima Cobrança"}),e.jsx("p",{className:"font-semibold",children:r()?`${n()} dias`:"Não definido"})]})]})]})]}),e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Ações"]})}),e.jsxs(N,{className:"space-y-3",children:[!l&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{className:"w-full",onClick:()=>d("/upgrade"),children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),r()?"Escolher Plano":"Alterar Plano"]}),!r()&&e.jsxs(m,{variant:"outline",className:"w-full",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Método de Pagamento"]})]}),e.jsxs(m,{variant:"outline",className:"w-full",onClick:()=>d("/invoices"),children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Histórico de Faturas"]})]})]})]}),!l&&e.jsx("div",{className:"mt-8",children:e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(j,{children:"Uso do Plano"}),e.jsx(O,{children:"Acompanhe seu uso mensal e limites do plano"})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Transações"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t?.transactions_count||0," / ",c().transactions]})]}),e.jsx(x,{value:f(t?.transactions_count||0,c().transactions),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c().transactions-(t?.transactions_count||0)," restantes"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Usuários"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t?.users_count||0," / ",c().users]})]}),e.jsx(x,{value:f(t?.users_count||0,c().users),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c().users-(t?.users_count||0)," restantes"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Clientes"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t?.clients_count||0," / ",c().clients]})]}),e.jsx(x,{value:f(t?.clients_count||0,c().clients),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c().clients-(t?.clients_count||0)," restantes"]})]})]})})]})})]})]})}export{Ne as default};
