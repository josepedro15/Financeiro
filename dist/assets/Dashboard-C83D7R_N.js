import{j as e}from"./ui-REgLbvYD.js";import{r as x}from"./vendor-CZTyH7vC.js";import{c as te,u as Se,s as f,i as z,b as Y,d as p,e as j,f as g,h as N,g as ee,B as h,X as Ge,a as Xe,j as He,S as Qe}from"./index-CEWSuqQl.js";import{u as Ze}from"./useSubscription-DhxdCAB2.js";import{S as et,a as tt,b as st,c as at,d as rt}from"./select-BO5klpzl.js";import{U as ke}from"./users-ChdzeEck.js";import{C as nt}from"./check-BGI8r9zT.js";import{D as ce}from"./dollar-sign-H1vXIGWo.js";import{D as ot}from"./database-BpCxfkHm.js";import{C as ct}from"./clock-CGd2rjcg.js";import{C as ge}from"./crown-Cds7l43z.js";import{C as Ne}from"./credit-card-Cj9gw6wD.js";import{C as it}from"./chart-column-DGvSZMBv.js";import{T as lt}from"./trending-up-Ba5xrjEm.js";import{T as dt}from"./trending-down-CYX1fcjv.js";import{R as be,B as mt,C as ye,X as ve,Y as we,T as _e,a as xt,L as ut,b as ht}from"./charts-DE-LwN1H.js";import{P as Ce}from"./plus-L7-Ylng2.js";import{A as ft}from"./arrow-up-right-DR0PZsCr.js";import{A as pt}from"./arrow-down-right-DmjQEtt_.js";import"./supabase-DfbQpoin.js";import"./chevron-up-BprSQyvM.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=te("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);function yt(){const{user:i}=Se(),[P,D]=x.useState([]),[$,U]=x.useState(!0);x.useEffect(()=>{i&&V()},[i]);const V=async()=>{if(i)try{const{data:s,error:n}=await f.from("notifications").select("*").eq("user_id",i.id).order("created_at",{ascending:!1});if(n){z.error(`Erro ao carregar notificações: ${n.message}`);return}D(s||[])}catch{z.error("Erro inesperado ao carregar notificações")}finally{U(!1)}},F=async(s,n,v)=>{try{const{error:_}=await f.from("organization_members").update({status:v==="accepted"?"active":"rejected",updated_at:new Date().toISOString()}).eq("id",n);if(_){z.error(`Erro ao processar resposta: ${_.message}`);return}const{error:M}=await f.from("notifications").update({status:v,read:!0,updated_at:new Date().toISOString()}).eq("id",s);D(K=>K.map(W=>W.id===s?{...W,status:v,read:!0}:W)),z.success(v==="accepted"?"Convite aceito! Agora você pode acessar os dados da organização.":"Convite rejeitado."),v==="accepted"&&setTimeout(()=>window.location.reload(),1500)}catch{z.error("Erro inesperado ao processar resposta")}},se=async s=>{try{const{error:n}=await f.from("notifications").update({read:!0}).eq("id",s);n||D(v=>v.map(_=>_.id===s?{..._,read:!0}:_))}catch{}},A=P.filter(s=>s.status==="pending");return P.filter(s=>!s.read).length,$?e.jsx("div",{className:"animate-pulse",children:"Carregando notificações..."}):P.length===0?null:e.jsxs("div",{className:"space-y-4",children:[A.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"h-5 w-5 text-orange-500"}),e.jsxs(Y,{variant:"destructive",children:[A.length," convite",A.length>1?"s":""," pendente",A.length>1?"s":""]})]}),e.jsx("div",{className:"space-y-3",children:P.map(s=>e.jsxs(p,{className:`${s.read?"":"border-blue-200 bg-blue-50"} ${s.status==="pending"?"border-orange-200 bg-orange-50":""}`,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"h-4 w-4 text-blue-600"}),e.jsx(g,{className:"text-sm",children:s.title}),!s.read&&e.jsx(Y,{variant:"secondary",className:"text-xs",children:"Nova"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[s.status==="accepted"&&e.jsx(Y,{variant:"default",className:"text-xs",children:"Aceito"}),s.status==="rejected"&&e.jsx(Y,{variant:"destructive",className:"text-xs",children:"Rejeitado"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]})]})}),e.jsxs(N,{className:"pt-0",children:[e.jsx(ee,{className:"mb-3",children:s.message}),s.type==="organization_invite"&&s.status==="pending"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(h,{size:"sm",onClick:()=>{const n=s.data?.organization_member_id;if(!n){z.error("Erro: ID da organização não encontrado");return}F(s.id,n,"accepted")},className:"bg-green-600 hover:bg-green-700",children:[e.jsx(nt,{className:"h-4 w-4 mr-1"}),"Aceitar"]}),e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>{const n=s.data?.organization_member_id;if(!n){z.error("Erro: ID da organização não encontrado");return}F(s.id,n,"rejected")},children:[e.jsx(Ge,{className:"h-4 w-4 mr-1"}),"Rejeitar"]})]}),s.status==="pending"&&s.type!=="organization_invite"&&e.jsx(h,{size:"sm",variant:"outline",onClick:()=>se(s.id),children:"Marcar como lida"})]})]},s.id))})]})}function Ut(){const{user:i,signOut:P}=Se(),{isMasterUser:D,isTrialActive:$,getTrialDaysLeft:U,getPlanName:V,currentPlan:F,currentTransactions:se,transactionLimit:A,loading:s}=Ze(),n=Xe(),[v,_]=x.useState([]),[M,K]=x.useState(""),[W,ie]=x.useState(!0),[r,De]=x.useState({totalIncome:0,totalExpenses:0,balancePJ:0,balanceCheckout:0,recentTransactions:[],monthlyRevenue:[],dailyRevenue:[],currentMonth:"",currentMonthRevenue:0,ticketMedio:0,lucroLiquido:0,margemLucro:0,crescimentoMensal:0,totalTransacoes:0}),[Me,Te]=x.useState(!0),[Ee,Le]=x.useState(new Date),[B,Re]=x.useState(0);x.useEffect(()=>{if(!i){n("/auth");return}ze()},[i,n]),x.useEffect(()=>{M&&ae()},[M]),x.useEffect(()=>{if(!i)return;const t=setInterval(()=>{ae()},3e4);return()=>clearInterval(t)},[i]),x.useEffect(()=>{if(!D&&$()){const t=()=>{const T=U();Re(T)};t();const C=setInterval(t,6e4);return()=>clearInterval(C)}},[D,$,U]);const ze=async()=>{if(i){ie(!0);try{const t=[];t.push({id:i.id,email:i.email||"",name:"Meus dados",isOwner:!0});const{data:C,error:T}=await f.rpc("get_organization_members",{user_member_id:i.id});if(!T&&C&&Array.isArray(C))for(const d of C){const{data:q,error:G}=await f.rpc("get_profile_email",{user_profile_id:d.owner_id});!G&&q&&t.push({id:d.owner_id,email:q,name:`Dados de ${q}`,isOwner:!1})}const{data:J,error:I}=await f.from("organization_members").select(`
          member_id,
          profiles!organization_members_member_id_fkey(email)
        `).eq("owner_id",i.id).eq("status","active");if(!I&&J)for(const d of J)d.profiles&&d.profiles.email&&t.push({id:d.member_id,email:d.profiles.email,name:`Dados compartilhados com ${d.profiles.email}`,isOwner:!0});_(t),t.length>0&&!M&&K(t[0].id)}catch{}finally{ie(!1)}}},ae=async()=>{if(!i)return;const t=M||i.id;try{const C=[{table:"transactions_2025_01",month:"Jan",monthNum:1},{table:"transactions_2025_02",month:"Fev",monthNum:2},{table:"transactions_2025_03",month:"Mar",monthNum:3},{table:"transactions_2025_04",month:"Abr",monthNum:4},{table:"transactions_2025_05",month:"Mai",monthNum:5},{table:"transactions_2025_06",month:"Jun",monthNum:6},{table:"transactions_2025_07",month:"Jul",monthNum:7},{table:"transactions_2025_08",month:"Ago",monthNum:8},{table:"transactions_2025_09",month:"Set",monthNum:9},{table:"transactions_2025_10",month:"Out",monthNum:10},{table:"transactions_2025_11",month:"Nov",monthNum:11},{table:"transactions_2025_12",month:"Dez",monthNum:12}];let T=[],J=[],I=[],d=0,q=0,G=0,le=0,de=0,X=0;for(const o of C)try{const{data:k,error:w}=await f.from(o.table).select("*").eq("user_id",t);if(w){I.push({month:o.month,revenue:0});continue}const l=k||[],c=l.filter(a=>a.transaction_type==="income"),m=l.filter(a=>a.transaction_type==="expense"),y=m.filter(a=>a.category!=="Prolabore"),E=c.filter(a=>a.account_name==="Conta PJ"),L=c.filter(a=>a.account_name==="Conta Checkout"),R=m.filter(a=>a.account_name==="Conta PJ"),O=m.filter(a=>a.account_name==="Conta Checkout"),Z=c.reduce((a,u)=>a+Number(u.amount),0),Oe=m.reduce((a,u)=>a+Number(u.amount),0),Ye=y.reduce((a,u)=>a+Number(u.amount),0),Ue=E.reduce((a,u)=>a+Number(u.amount),0),Ve=L.reduce((a,u)=>a+Number(u.amount),0),Ke=R.reduce((a,u)=>a+Number(u.amount),0),We=O.reduce((a,u)=>a+Number(u.amount),0);d+=Z,q+=Oe,G+=Ye,X+=c.length,le+=Ue-Ke,de+=Ve-We,T=[...T,...l],J=[...J,...c],I.push({month:o.month,revenue:Z})}catch{I.push({month:o.month,revenue:0})}let S=[];try{const{data:o,error:k}=await f.from("transactions").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(10);k||o&&(S=[...S,...o]);const w=new Date,l=w.getMonth()+1,c=w.getFullYear();for(let m=0;m<3;m++){const y=l-m,E=y<=0?c-1:c,L=y<=0?y+12:y,R=`transactions_${E}_${String(L).padStart(2,"0")}`;try{const{data:O,error:Z}=await f.from(R).select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(5);Z||O&&(S=[...S,...O])}catch{}}S.sort((m,y)=>new Date(y.created_at).getTime()-new Date(m.created_at).getTime()),S=S.slice(0,5),S.forEach((m,y)=>{})}catch{}const vt=T.filter(o=>o.transaction_date?.startsWith("2025-04")),Pe=le,$e=de,me=new Date,xe=me.getMonth()+1,Ae=me.getFullYear(),Ie=C.find(o=>o.monthNum===xe)?.month||"",qe=`transactions_${Ae}_${String(xe).padStart(2,"0")}`;let ue=[],he=0;try{const{data:o,error:k}=await f.from(qe).select("transaction_date, amount, account_name").eq("user_id",t).eq("transaction_type","income");if(!k){if(o){const w=new Map;o.forEach(l=>{const c=new Date(l.transaction_date).getDate().toString(),m=w.get(c)||0;w.set(c,m+Number(l.amount))}),ue=Array.from(w.entries()).map(([l,c])=>({day:l,revenue:c})).sort((l,c)=>parseInt(l.day)-parseInt(c.day)),he=o.reduce((l,c)=>l+Number(c.amount),0)}}}catch{}const Fe=X>0?d/X:0,fe=d-G,Be=fe,Je=d>0?Be/d*100:0;let pe=0;const re=new Date,je=re.getDate(),ne=re.getMonth()+1,H=re.getFullYear();let Q=ne-1,oe=H;Q===0&&(Q=12,oe=H-1);try{const o=`transactions_${H}_${String(ne).padStart(2,"0")}`,{data:k,error:w}=await f.from(o).select("transaction_date, amount").eq("user_id",t).eq("transaction_type","income").lte("transaction_date",`${H}-${String(ne).padStart(2,"0")}-${String(je).padStart(2,"0")}`),l=`transactions_${oe}_${String(Q).padStart(2,"0")}`,{data:c,error:m}=await f.from(l).select("transaction_date, amount").eq("user_id",t).eq("transaction_type","income").lte("transaction_date",`${oe}-${String(Q).padStart(2,"0")}-${String(je).padStart(2,"0")}`);if(!w&&!m&&k&&c){const y=k.reduce((L,R)=>L+Number(R.amount),0),E=c.reduce((L,R)=>L+Number(R.amount),0);E>0&&(pe=(y-E)/E*100)}}catch{}De({totalIncome:d,totalExpenses:q,balancePJ:Pe,balanceCheckout:$e,recentTransactions:S,monthlyRevenue:I,dailyRevenue:ue,currentMonth:Ie,currentMonthRevenue:he,ticketMedio:Fe,lucroLiquido:fe,margemLucro:Je,crescimentoMensal:pe,totalTransacoes:X}),Le(new Date)}catch{}finally{Te(!1)}},b=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t);return Me?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(h,{variant:"ghost",className:"p-0 h-auto hover:bg-transparent",onClick:()=>n("/"),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-primary rounded-lg flex items-center justify-center",children:e.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-foreground"})}),e.jsx("h1",{className:"text-lg sm:text-2xl font-bold",children:"FinanceiroLogotiq"})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground text-center",children:["Bem-vindo, ",i?.email]}),v.length>=1&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"h-4 w-4 text-gray-600"}),e.jsxs(et,{value:M,onValueChange:K,children:[e.jsx(tt,{className:"w-48",children:e.jsx(st,{placeholder:"Selecionar fonte de dados"})}),e.jsx(at,{children:v.map(t=>e.jsx(rt,{value:t.id,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:t.name}),t.isOwner&&t.id!==i.id&&e.jsx("span",{className:"text-xs text-blue-600",children:"(Compartilhado)"}),!t.isOwner&&e.jsx("span",{className:"text-xs text-green-600",children:"(Organização)"})]})},t.id))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>n("/clients"),children:[e.jsx(ke,{className:"w-4 h-4 mr-1"}),"CRM"]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>n("/settings"),children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),"Configurações"]}),D&&e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>n("/analytics"),children:[e.jsx(Qe,{className:"w-4 h-4 mr-1"}),"Analytics"]}),e.jsx(h,{variant:"outline",size:"sm",onClick:ae,children:"Atualizar"}),e.jsx(h,{variant:"outline",size:"sm",onClick:P,children:"Sair"})]})]})]})}),!D&&!s&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-3",children:$()?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Trial Gratuito - ",B," dias restantes",B<=3&&B>0&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"⚠️ Acaba em breve!"})]}),e.jsx("p",{className:"text-xs text-blue-700",children:B<=3&&B>0?"Seu trial está acabando! Faça upgrade para continuar usando.":"Aproveite o período de teste para conhecer todas as funcionalidades"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["Plano ",V(F)," Ativo"]}),e.jsxs("p",{className:"text-xs text-green-700",children:[se," / ",A," transações utilizadas"]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{variant:"outline",className:"text-xs",children:$()?"Trial":V(F)}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>n("/subscription"),children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"Assinatura"]})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(yt,{})}),e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Última atualização: ",Ee.toLocaleTimeString("pt-BR")]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-6 mb-8",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Receita Total"}),e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b(r.totalIncome)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",b(r.totalIncome-r.totalExpenses)," vs despesas"]})]})]}),e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Saldo em Caixa"}),e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b(r.balancePJ+r.balanceCheckout)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Soma das duas contas"})]})]}),e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Saldo PJ"}),e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b(r.balancePJ)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Conta Pessoa Jurídica"})]})]}),e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Saldo Checkout"}),e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b(r.balanceCheckout)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Conta Checkout"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Ticket Médio"}),e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b(r.ticketMedio)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Por venda (",r.totalTransacoes," vendas)"]})]})]}),e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Lucro Líquido"}),e.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:`text-2xl font-bold ${r.lucroLiquido>=0?"text-green-600":"text-red-600"}`,children:b(r.lucroLiquido)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receita - Despesas (sem prolabore)"})]})]}),e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Margem de Lucro"}),e.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:`text-2xl font-bold ${r.margemLucro>=0?"text-green-600":"text-red-600"}`,children:[r.margemLucro.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Eficiência financeira"})]})]}),e.jsxs(p,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:"Crescimento Mensal"}),e.jsx(it,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:`text-2xl font-bold flex items-center ${r.crescimentoMensal>=0?"text-green-600":"text-red-600"}`,children:[r.crescimentoMensal>=0?e.jsx(lt,{className:"h-4 w-4 mr-1"}):e.jsx(dt,{className:"h-4 w-4 mr-1"}),Math.abs(r.crescimentoMensal).toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"acumulado até hoje vs mês anterior"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(p,{children:[e.jsxs(j,{children:[e.jsx(g,{children:"Evolução Mensal - Todas as Contas"}),e.jsx(ee,{children:"Receita mensal total em 2025 (todas as contas)"})]}),e.jsx(N,{children:e.jsx(be,{width:"100%",height:300,children:e.jsxs(mt,{data:r.monthlyRevenue,children:[e.jsx(ye,{strokeDasharray:"3 3"}),e.jsx(ve,{dataKey:"month"}),e.jsx(we,{}),e.jsx(_e,{formatter:t=>b(t),labelStyle:{color:"black"}}),e.jsx(xt,{dataKey:"revenue",fill:"#3b82f6"})]})})})]}),e.jsxs(p,{children:[e.jsxs(j,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:["Faturamento Diário - ",r.currentMonth,e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:"Mês Atual"})]}),e.jsx(ee,{children:r.currentMonth?`Receita diária total em ${r.currentMonth.toLowerCase()} 2025 - Total: ${b(r.currentMonthRevenue)}`:"Carregando dados do mês atual..."})]}),e.jsx(N,{children:e.jsx(be,{width:"100%",height:300,children:e.jsxs(ut,{data:r.dailyRevenue,children:[e.jsx(ye,{strokeDasharray:"3 3"}),e.jsx(ve,{dataKey:"day",label:{value:"Dia do Mês",position:"insideBottom",offset:-5}}),e.jsx(we,{}),e.jsx(_e,{formatter:t=>[b(t),"Faturamento"],labelFormatter:t=>`Dia ${t}`,labelStyle:{color:"black"}}),e.jsx(ht,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#10b981",strokeWidth:2}})]})})})]})]}),e.jsxs(p,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Transações Recentes"}),e.jsxs(ee,{children:["Últimas ",r.recentTransactions.length," transações"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>n("/transactions"),children:"Ver Todas"}),e.jsxs(h,{size:"sm",onClick:()=>n("/transactions"),className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Nova Transação"]})]})]})}),e.jsx(N,{children:r.recentTransactions.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhuma transação encontrada"}),e.jsxs(h,{onClick:()=>n("/transactions"),className:"flex items-center gap-2 mx-auto",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Criar Primeira Transação"]})]}):e.jsx("div",{className:"space-y-4",children:r.recentTransactions.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${t.transaction_type==="income"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:t.transaction_type==="income"?e.jsx(ft,{className:"h-4 w-4"}):e.jsx(pt,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.description}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(t.transaction_date).toLocaleDateString("pt-BR")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-medium ${t.transaction_type==="income"?"text-green-600":"text-red-600"}`,children:[t.transaction_type==="income"?"+":"-",b(t.amount)]}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:t.transaction_type})]})]},t.id))})})]})]})]})}export{Ut as default};
