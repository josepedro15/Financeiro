import{j as e}from"./ui-REgLbvYD.js";import{r as m}from"./vendor-CZTyH7vC.js";import{c as D,o as K,p as t,a as Q,u as W,B as j,b as i,S as M,d as r,h as n,C as V,e as c,f as l,E as I,I as X,j as Y,G as Z}from"./index-_MNc14Zi.js";import{T as _,a as ee,b,c as w}from"./tabs-lPptT0d9.js";import{L as se}from"./lock-DJBSycho.js";import{A as R}from"./arrow-left-Bw6v3Z98.js";import{D as ae}from"./dollar-sign-7cb5Iagd.js";import{R as te,D as q}from"./refresh-cw-DhoHLVBP.js";import{C as ie}from"./chart-column-DzQf4OKN.js";import{T as B}from"./triangle-alert-DSgmNfhW.js";import{U as re}from"./users-DcDNkz-q.js";import{C as z}from"./clock-BQ8vJYEX.js";import{T as ne}from"./trending-up-B5r57d5D.js";import{T as F}from"./trash-2-CZh_roe9.js";import"./supabase-DfbQpoin.js";import"./charts-DE-LwN1H.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=D("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=D("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=D("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),oe=()=>{const x=K(),[a,s]=m.useState(t.getUserPreferences()),[o,p]=m.useState(t.getAnalyticsData()),[N,A]=m.useState(t.isNewUser());return m.useEffect(()=>{a.analytics&&(t.trackPageView(x.pathname),p(t.getAnalyticsData()))},[x.pathname,a.analytics]),m.useEffect(()=>{a.analytics&&t.startSessionTimer()},[a.analytics]),m.useEffect(()=>{const u=k=>{s(k.detail)};return window.addEventListener("preferencesChanged",u),()=>{window.removeEventListener("preferencesChanged",u)}},[]),{preferences:a,analytics:o,isNewUser:N,updatePreferences:u=>{t.setUserPreferences(u),s(t.getUserPreferences())},getUsageStats:()=>t.getUsageStats(),exportUserData:()=>t.exportUserData(),clearNonEssentialCookies:()=>{t.clearNonEssentialCookies(),s(t.getUserPreferences()),p(t.getAnalyticsData())},isAnalyticsEnabled:a.analytics,isMarketingEnabled:a.marketing,currentTheme:a.theme,currentLanguage:a.language,currentCurrency:a.currency,dashboardLayout:a.dashboardLayout,sidebarCollapsed:a.sidebarCollapsed}},Ae=()=>{const x=Q(),{user:a}=W(),{preferences:s,analytics:o,isNewUser:p,getUsageStats:N,exportUserData:A,clearNonEssentialCookies:T}=oe(),[d,E]=m.useState(N()),[g,u]=m.useState(null),[k,O]=m.useState(!1),[G,$]=m.useState(!0);m.useEffect(()=>{(()=>{a?.id==="2dc520e3-5f19-4dfe-838b-1aca7238ae36"?O(!0):x("/dashboard"),$(!1)})()},[a,x]);const L=()=>{E(N())},H=()=>{const h=A();u(h);const y=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),U=URL.createObjectURL(y),f=document.createElement("a");f.href=U,f.download=`financeirologotiq-analytics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(U)},J=()=>{confirm("Tem certeza que deseja limpar todos os cookies não essenciais? Esta ação não pode ser desfeita.")&&(T(),L())},S=(h=>/Mobile|Android|iPhone|iPad/.test(h)?"Mobile":/Tablet|iPad/.test(h)?"Tablet":"Desktop")(o.userAgent),v=Math.round(d.averageSessionTime/6e4*10)/10,P=Math.round(d.totalSessionTime/36e5*10)/10,C=Math.ceil((Date.now()-new Date(o.firstVisit).getTime())/(1e3*60*60*24));return G?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):k?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-background",children:[e.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{variant:"ghost",className:"p-0 h-auto hover:bg-transparent",onClick:()=>x("/"),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx(ae,{className:"w-5 h-5 text-primary-foreground"})}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"FinanceiroLogotiq"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"default",className:"bg-primary/10 text-primary border-primary/20",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),"Admin"]}),e.jsxs(j,{variant:"outline",onClick:L,children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Atualizar"]}),e.jsxs(j,{variant:"outline",onClick:()=>x("/dashboard"),children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Dashboard"]})]})]})})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(ie,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Analytics do Sistema"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Dashboard exclusivo para análise de dados do FinanceiroLogotiq"}),e.jsx("div",{className:"mt-4",children:e.jsxs(i,{variant:"secondary",className:"bg-primary/10 text-primary",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),"Acesso Administrativo"]})})]}),e.jsx("div",{className:"mb-8",children:e.jsx(r,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.analytics?e.jsx(V,{className:"w-5 h-5 text-success"}):e.jsx(B,{className:"w-5 h-5 text-warning"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:["Status do Analytics: ",s.analytics?"Ativo":"Inativo"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.analytics?"Coletando dados para melhorar a experiência":"Analytics desabilitado - alguns dados podem não estar disponíveis"})]})]}),e.jsx(i,{variant:s.analytics?"default":"secondary",children:s.analytics?"Coletando":"Pausado"})]})})})}),e.jsxs(_,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ee,{className:"grid w-full grid-cols-4",children:[e.jsx(b,{value:"overview",children:"Visão Geral"}),e.jsx(b,{value:"usage",children:"Uso Detalhado"}),e.jsx(b,{value:"preferences",children:"Preferências"}),e.jsx(b,{value:"data",children:"Gerenciar Dados"})]}),e.jsxs(w,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs(r,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total de Visitas"}),e.jsx(re,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.totalVisits}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Desde ",new Date(o.firstVisit).toLocaleDateString("pt-BR")]})]})]}),e.jsxs(r,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Páginas Únicas"}),e.jsx(I,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.uniquePages}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Páginas diferentes visitadas"})]})]}),e.jsxs(r,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Tempo Total"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[P,"h"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tempo total de uso"})]})]}),e.jsxs(r,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Sessão Média"}),e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[v,"min"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Por sessão"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Informações do Usuário"]})}),e.jsx(n,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tipo de Usuário:"}),e.jsx(i,{variant:p?"secondary":"default",className:"ml-2",children:p?"Novo":"Recorrente"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Dispositivo:"}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[S==="Mobile"&&e.jsx(de,{className:"w-4 h-4"}),S==="Desktop"&&e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-muted-foreground",children:S})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Primeira Visita:"}),e.jsx("p",{className:"text-muted-foreground",children:new Date(o.firstVisit).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Última Visita:"}),e.jsx("p",{className:"text-muted-foreground",children:new Date(o.lastVisit).toLocaleDateString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Dias Ativo:"}),e.jsxs("p",{className:"text-muted-foreground",children:[C," dias"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Frequência:"}),e.jsxs("p",{className:"text-muted-foreground",children:[C>0?Math.round(d.totalVisits/C*10)/10:0," visitas/dia"]})]})]})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),"Tendências"]})}),e.jsx(n,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Engajamento"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min(d.totalVisits/30*100,100)}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.min(d.totalVisits/30*100,100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Exploração"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-secondary h-2 rounded-full",style:{width:`${Math.min(d.uniquePages/10*100,100)}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.min(d.uniquePages/10*100,100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Retenção"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-success h-2 rounded-full",style:{width:`${Math.min(v/10*100,100)}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.min(v/10*100,100).toFixed(0),"%"]})]})]})]})})]})]})]}),e.jsx(w,{value:"usage",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Páginas Visitadas"]})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:o.pagesVisited.length>0?o.pagesVisited.map((h,y)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[e.jsx("span",{className:"text-sm font-mono",children:h}),e.jsxs(i,{variant:"outline",children:["#",y+1]})]},y)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhuma página visitada ainda"})})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"Estatísticas de Sessão"]})}),e.jsx(n,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-3 bg-primary/5 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:d.totalVisits}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total de Visitas"})]}),e.jsxs("div",{className:"text-center p-3 bg-secondary/5 rounded",children:[e.jsx("div",{className:"text-2xl font-bold text-secondary",children:d.uniquePages}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Páginas Únicas"})]}),e.jsxs("div",{className:"text-center p-3 bg-success/5 rounded",children:[e.jsxs("div",{className:"text-2xl font-bold text-success",children:[P,"h"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Tempo Total"})]}),e.jsxs("div",{className:"text-center p-3 bg-warning/5 rounded",children:[e.jsxs("div",{className:"text-2xl font-bold text-warning",children:[v,"min"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Média/Sessão"})]})]})})]})]})}),e.jsx(w,{value:"preferences",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5"}),"Preferências Atuais"]})}),e.jsx(n,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tema:"}),e.jsx(i,{variant:"outline",className:"ml-2",children:s.theme})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Idioma:"}),e.jsx(i,{variant:"outline",className:"ml-2",children:s.language})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Moeda:"}),e.jsx(i,{variant:"outline",className:"ml-2",children:s.currency})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Layout:"}),e.jsx(i,{variant:"outline",className:"ml-2",children:s.dashboardLayout})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Notificações:"}),e.jsx(i,{variant:s.notifications?"default":"secondary",className:"ml-2",children:s.notifications?"Ativo":"Inativo"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Analytics:"}),e.jsx(i,{variant:s.analytics?"default":"secondary",className:"ml-2",children:s.analytics?"Ativo":"Inativo"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Marketing:"}),e.jsx(i,{variant:s.marketing?"destructive":"secondary",className:"ml-2",children:s.marketing?"Ativo":"Inativo"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Sidebar:"}),e.jsx(i,{variant:s.sidebarCollapsed?"secondary":"default",className:"ml-2",children:s.sidebarCollapsed?"Recolhida":"Expandida"})]})]})})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"Informações do Sistema"]})}),e.jsx(n,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"User Agent:"}),e.jsx("p",{className:"text-muted-foreground text-xs mt-1 break-all",children:o.userAgent})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Referrer:"}),e.jsx("p",{className:"text-muted-foreground text-xs mt-1",children:o.referrer||"Direto"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cookies Suportados:"}),e.jsx(i,{variant:t.isSupported()?"default":"destructive",className:"ml-2",children:t.isSupported()?"Sim":"Não"})]})]})})]})]})}),e.jsxs(w,{value:"data",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"Exportar Dados"]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Baixe todos os seus dados em formato JSON. Isso inclui preferências, analytics e configurações de cookies."}),e.jsxs(j,{onClick:H,className:"w-full",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Exportar Dados (LGPD)"]}),g&&e.jsx("div",{className:"p-3 bg-success/5 border border-success/10 rounded",children:e.jsxs("p",{className:"text-sm text-success",children:[e.jsx(V,{className:"w-4 h-4 inline mr-2"}),"Dados exportados com sucesso!"]})})]})]}),e.jsxs(r,{children:[e.jsx(c,{children:e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Limpar Dados"]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remova todos os cookies não essenciais. Isso irá limpar suas preferências e dados de analytics."}),e.jsxs(j,{variant:"destructive",onClick:J,className:"w-full",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Limpar Cookies"]}),e.jsx("div",{className:"p-3 bg-warning/5 border border-warning/10 rounded",children:e.jsxs("p",{className:"text-sm text-warning",children:[e.jsx(B,{className:"w-4 h-4 inline mr-2"}),"Esta ação não pode ser desfeita"]})})]})]})]}),g&&e.jsxs(r,{children:[e.jsx(c,{children:e.jsx(l,{children:"Preview dos Dados Exportados"})}),e.jsx(n,{children:e.jsx("pre",{className:"bg-muted p-4 rounded text-xs overflow-auto max-h-96",children:JSON.stringify(g,null,2)})})]})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-background",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-destructive/10 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(se,{className:"w-8 h-8 text-destructive"})}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Acesso Negado"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Esta página é exclusiva para administradores do sistema."}),e.jsxs(j,{onClick:()=>x("/dashboard"),children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Voltar ao Dashboard"]})]})})})};export{Ae as default};
