import{j as e}from"./ui-GI4EfHd4.js";import{r as y}from"./vendor-CZTyH7vC.js";import{u as B,a as E,f as M}from"./index-COeLcZn-.js";import{u as R}from"./useSubscription-inDMi8iB.js";import{C as x,a as h,b as u,c as C,d as p,B as j}from"./card-CMCqEaxJ.js";import{I as l}from"./input-BI0UmSnB.js";import{L as i}from"./label-4UFarwC6.js";import{B as T}from"./badge-Ce4h7Quw.js";import{S as w}from"./shield-EsF0cOQP.js";import{A as I}from"./arrow-left-DfZfHuAZ.js";import{C as z}from"./credit-card-DAW25ims.js";import{L as S}from"./lock-N3O53scM.js";import{C as g}from"./check-Cc5nliV0.js";import{C as U}from"./clock-BNXn9FVg.js";import"./supabase-DfbQpoin.js";import"./charts-DE-LwN1H.js";function ie(){const{user:P}=B(),{isMasterUser:N,getPlanName:$,getPlanPrice:G}=R(),m=E(),[D]=M(),[f,v]=y.useState(!1),[r,F]=y.useState({cardNumber:"",cardName:"",expiryDate:"",cvv:"",email:P?.email||""}),L=D.get("plan")||"starter",t={starter:{name:"Starter",price:79.9,features:["100 transações por mês","1 usuário","10 clientes","Suporte por email"]},business:{name:"Business",price:159.9,features:["1.000 transações por mês","3 usuários","50 clientes","Suporte prioritário"]}}[L],c=(s,a)=>{F(n=>({...n,[s]:a}))},k=s=>{const a=s.replace(/\s+/g,"").replace(/[^0-9]/gi,""),n=a.match(/\d{4,16}/g),b=n&&n[0]||"",o=[];for(let d=0,V=b.length;d<V;d+=4)o.push(b.substring(d,d+4));return o.length?o.join(" "):a},q=s=>{const a=s.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return a.length>=2?a.substring(0,2)+"/"+a.substring(2,4):a},A=async s=>{if(s.preventDefault(),N){alert("Usuário master não precisa de pagamento");return}v(!0);try{await new Promise(a=>setTimeout(a,2e3)),m("/subscription?success=true")}catch{alert("Erro ao processar pagamento. Tente novamente.")}finally{v(!1)}};return N?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs(x,{className:"w-full max-w-md",children:[e.jsxs(h,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 p-3 bg-purple-100 rounded-full w-fit",children:e.jsx(w,{className:"w-6 h-6 text-purple-600"})}),e.jsx(u,{children:"Conta Master"}),e.jsx(C,{children:"Sua conta tem acesso ilimitado a todos os recursos"})]}),e.jsx(p,{children:e.jsx(j,{className:"w-full",onClick:()=>m("/dashboard"),children:"Voltar ao Dashboard"})})]})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(j,{variant:"ghost",onClick:()=>m("/plans"),children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Voltar"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Checkout"}),e.jsx("p",{className:"text-muted-foreground",children:"Finalize sua assinatura"})]})]})})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid gap-8 lg:grid-cols-2 max-w-6xl mx-auto",children:[e.jsx("div",{children:e.jsxs(x,{children:[e.jsxs(h,{children:[e.jsxs(u,{className:"flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2"}),"Informações de Pagamento"]}),e.jsx(C,{children:"Preencha os dados do seu cartão de crédito"})]}),e.jsx(p,{children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",value:r.email,onChange:s=>c("email",s.target.value),placeholder:"seu@email.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cardNumber",children:"Número do Cartão"}),e.jsx(l,{id:"cardNumber",type:"text",value:r.cardNumber,onChange:s=>c("cardNumber",k(s.target.value)),placeholder:"0000 0000 0000 0000",maxLength:19,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cardName",children:"Nome no Cartão"}),e.jsx(l,{id:"cardName",type:"text",value:r.cardName,onChange:s=>c("cardName",s.target.value),placeholder:"Nome como está no cartão",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"expiryDate",children:"Data de Validade"}),e.jsx(l,{id:"expiryDate",type:"text",value:r.expiryDate,onChange:s=>c("expiryDate",q(s.target.value)),placeholder:"MM/AA",maxLength:5,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cvv",children:"CVV"}),e.jsx(l,{id:"cvv",type:"text",value:r.cvv,onChange:s=>c("cvv",s.target.value.replace(/\D/g,"")),placeholder:"123",maxLength:4,required:!0})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 rounded-lg",children:[e.jsx(S,{className:"w-4 h-4 text-green-600"}),e.jsx("p",{className:"text-sm text-green-700",children:"Seus dados são protegidos com criptografia SSL"})]}),e.jsx(j,{type:"submit",className:"w-full",disabled:f,children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Finalizar Assinatura"]})})]})})]})}),e.jsx("div",{children:e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Resumo do Pedido"})}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:t.name}),e.jsx(T,{variant:"secondary",children:"Mensal"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Plano selecionado"}),e.jsx("ul",{className:"space-y-2",children:t.features.map((s,a)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:s})]},a))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Plano ",t.name]}),e.jsxs("span",{children:["R$ ",t.price.toFixed(2).replace(".",",")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Taxa de processamento"}),e.jsx("span",{children:"Grátis"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["R$ ",t.price.toFixed(2).replace(".",",")]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(U,{className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Período de teste gratuito"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Você tem 14 dias para testar antes da primeira cobrança"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Recursos de Segurança"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Pagamento seguro SSL"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Dados criptografados"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Cancelamento a qualquer momento"})]})]})]})]})]})})]})})]})}export{ie as default};
