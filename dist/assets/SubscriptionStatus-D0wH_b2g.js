import{c as D,j as e,d as S}from"./ui-GI4EfHd4.js";import{b as F,c as B,u as G,a as O}from"./index-DY3P09_h.js";import{u as z}from"./useSubscription-DzIK--mw.js";import{C as f,a as g,b as j,d as N,c as H}from"./card-Dj66Ejyv.js";import{B as m}from"./button-kKm3q5jC.js";import{r as b}from"./vendor-CZTyH7vC.js";import{A as X}from"./arrow-left-D5kmOB3q.js";import{A as y}from"./arrow-up-right-FHF5T-pz.js";import{C}from"./crown-CCpGWC2n.js";import{C as q}from"./calendar-DBEibE4K.js";import{F as v}from"./file-text-CfQDPyK7.js";import{a as J,C as K}from"./credit-card-Dar2he11.js";import{U as A}from"./users-C7LQ6KsY.js";import{T as Q}from"./triangle-alert-BIWPYXNN.js";import"./supabase-DfbQpoin.js";import"./charts-DE-LwN1H.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=F("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var w="Progress",Y=100,[Z,ve]=D(w),[ee,se]=Z(w),I=b.forwardRef((s,a)=>{const{__scopeProgress:t,value:r=null,max:n,getValueLabel:l=ae,...u}=s;(n||n===0)&&_(n);const i=_(n)?n:Y;r!==null&&$(r,i);const c=$(r,i)?r:null,d=p(c)?l(c,i):void 0;return e.jsx(ee,{scope:t,value:c,max:i,children:e.jsx(S.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":p(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":E(c,i),"data-value":c??void 0,"data-max":i,...u,ref:a})})});I.displayName=w;var M="ProgressIndicator",T=b.forwardRef((s,a)=>{const{__scopeProgress:t,...r}=s,n=se(M,t);return e.jsx(S.div,{"data-state":E(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:a})});T.displayName=M;function ae(s,a){return`${Math.round(s/a*100)}%`}function E(s,a){return s==null?"indeterminate":s===a?"complete":"loading"}function p(s){return typeof s=="number"}function _(s){return p(s)&&!isNaN(s)&&s>0}function $(s,a){return p(s)&&!isNaN(s)&&s<=a&&s>=0}var k=I,re=T;const x=b.forwardRef(({className:s,value:a,...t},r)=>e.jsx(k,{ref:r,className:B("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:e.jsx(re,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));x.displayName=k.displayName;function be(){const{user:s}=G(),{subscription:a,usage:t,isTrialActive:r,getTrialDaysLeft:n,isMasterUser:l,getPlanName:u,currentPlan:i,loading:c}=z(),d=O();if(c)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando status da assinatura..."})]})});const L=()=>l?"bg-gradient-to-r from-purple-500 to-indigo-500":r()?"bg-gradient-to-r from-blue-500 to-cyan-500":a?.status==="active"?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-gray-500 to-slate-500",R=()=>l?e.jsx(C,{className:"w-5 h-5"}):r()?e.jsx(K,{className:"w-5 h-5"}):a?.status==="active"?e.jsx(W,{className:"w-5 h-5"}):e.jsx(Q,{className:"w-5 h-5"}),U=()=>l?"Conta Master":r()?`Trial Gratuito - ${n()} dias restantes`:a?.status==="active"?`Plano ${u(i)} Ativo`:"Sem assinatura ativa",h=(V,P)=>P===0?0:Math.min(V/P*100,100),o=()=>{if(l)return{transactions:999999,users:999999,clients:999999};if(r())return{transactions:100,users:1,clients:10};switch(a?.plan_type){case"starter":return{transactions:100,users:1,clients:10};case"business":return{transactions:1e3,users:3,clients:50};default:return{transactions:100,users:1,clients:10}}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(m,{variant:"ghost",onClick:()=>d("/dashboard"),children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Voltar ao Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Status da Assinatura"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie sua conta e planos"})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(f,{children:[e.jsx(g,{children:e.jsx(j,{children:"Status da Assinatura"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:`${L()} text-white p-4 rounded-lg flex items-center justify-between`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[R(),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:U()}),e.jsx("p",{className:"text-sm opacity-90",children:s?.email})]})]}),!l&&e.jsxs(m,{variant:"secondary",size:"sm",onClick:()=>d("/subscription"),children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),"Upgrade"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx(C,{className:"w-5 h-5 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plano Atual"}),e.jsx("p",{className:"font-semibold",children:u(i)})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx(q,{className:"w-5 h-5 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Próxima Cobrança"}),e.jsx("p",{className:"font-semibold",children:r()?`${n()} dias`:"Não definido"})]})]})]})]}),e.jsxs(f,{children:[e.jsx(g,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Ações"]})}),e.jsxs(N,{className:"space-y-3",children:[!l&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{className:"w-full",onClick:()=>d("/subscription"),children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),r()?"Escolher Plano":"Alterar Plano"]}),!r()&&e.jsxs(m,{variant:"outline",className:"w-full",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Método de Pagamento"]})]}),e.jsxs(m,{variant:"outline",className:"w-full",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Histórico de Faturas"]})]})]})]}),!l&&e.jsx("div",{className:"mt-8",children:e.jsxs(f,{children:[e.jsxs(g,{children:[e.jsx(j,{children:"Uso do Plano"}),e.jsx(H,{children:"Acompanhe seu uso mensal e limites do plano"})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Transações"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t?.transactions_count||0," / ",o().transactions]})]}),e.jsx(x,{value:h(t?.transactions_count||0,o().transactions),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o().transactions-(t?.transactions_count||0)," restantes"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Usuários"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t?.users_count||0," / ",o().users]})]}),e.jsx(x,{value:h(t?.users_count||0,o().users),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o().users-(t?.users_count||0)," restantes"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Clientes"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t?.clients_count||0," / ",o().clients]})]}),e.jsx(x,{value:h(t?.clients_count||0,o().clients),className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o().clients-(t?.clients_count||0)," restantes"]})]})]})})]})})]})]})}export{be as default};
