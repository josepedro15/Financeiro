import{j as e}from"./ui-REgLbvYD.js";import{r as c}from"./vendor-CZTyH7vC.js";import{c as _,u as ne,a as ce,k as de,B as a,d,e as x,f as h,h as o,C as b,L as m,g as A,E as oe,b as p}from"./index-DnicOMcL.js";import{I as me}from"./input-WLmGkkMH.js";import{S as z,a as M,b as B,c as R,d as i}from"./select-BULg2jsU.js";import{A as xe}from"./arrow-left-B5_uGWWB.js";import{R as he,D as Z}from"./refresh-cw-SIl_rsmQ.js";import{P as ue}from"./plus-BZw1qXzF.js";import{C as $}from"./clock-C5LrIxG7.js";import{F as je}from"./filter-BsNs7GLY.js";import{F as H}from"./file-text-DsKFJH_j.js";import{U as pe}from"./user-BF45UOyB.js";import{M as w}from"./mail-DswCO0TC.js";import{D as fe}from"./dollar-sign-BkzFnFEs.js";import{C as O}from"./calendar-zKickOkm.js";import{S as G}from"./square-pen-Bp_SMlgf.js";import{T as Ne}from"./trash-2-C-cX3sBL.js";import{C as U}from"./circle-x-B742ZPcJ.js";import"./supabase-DfbQpoin.js";import"./charts-DE-LwN1H.js";import"./chevron-up-Bhp3mOHo.js";import"./check-MAI7uQDe.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=_("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=_("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=_("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function Ze(){const{user:C}=ne(),N=ce(),{toast:u}=de(),[r,K]=c.useState([]),[Q,k]=c.useState(!0),[f,S]=c.useState(""),[v,F]=c.useState("all"),[W,E]=c.useState("all"),[t,g]=c.useState(null),[D,I]=c.useState("list"),Y=[{id:"1",invoice_number:"INV-2025-001",client_name:"JOSE PEDRO DA SILVA FERNANDES",client_email:"jopedromkt@gmail.com",amount:2500,status:"paid",due_date:"2025-01-15",issue_date:"2025-01-01",payment_date:"2025-01-10",description:"Desenvolvimento de sistema financeiro",items:[{id:"1",description:"Desenvolvimento frontend",quantity:1,unit_price:1500,total:1500},{id:"2",description:"Desenvolvimento backend",quantity:1,unit_price:1e3,total:1e3}],notes:"Pagamento realizado via PIX",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-10T00:00:00Z"},{id:"2",invoice_number:"INV-2025-002",client_name:"Carlos Silva",client_email:"carlos@empresa.com",amount:1800,status:"pending",due_date:"2025-02-15",issue_date:"2025-02-01",description:"Consultoria em marketing digital",items:[{id:"3",description:"Análise de mercado",quantity:1,unit_price:800,total:800},{id:"4",description:"Estratégia de marketing",quantity:1,unit_price:1e3,total:1e3}],created_at:"2025-02-01T00:00:00Z",updated_at:"2025-02-01T00:00:00Z"},{id:"3",invoice_number:"INV-2025-003",client_name:"Maria Santos",client_email:"maria@consultoria.com",amount:3200,status:"overdue",due_date:"2025-01-20",issue_date:"2025-01-05",description:"Sistema de gestão empresarial",items:[{id:"5",description:"Módulo de vendas",quantity:1,unit_price:1200,total:1200},{id:"6",description:"Módulo de estoque",quantity:1,unit_price:1e3,total:1e3},{id:"7",description:"Módulo financeiro",quantity:1,unit_price:1e3,total:1e3}],created_at:"2025-01-05T00:00:00Z",updated_at:"2025-01-05T00:00:00Z"}];c.useEffect(()=>{if(!C){N("/auth");return}T()},[C,N]);const T=async()=>{try{k(!0),K(Y)}catch{u({title:"Erro",description:"Erro ao carregar histórico de faturas",variant:"destructive"})}finally{k(!1)}},P=s=>{switch(s){case"paid":return e.jsxs(p,{className:"bg-green-100 text-green-800",children:[e.jsx(b,{className:"w-3 h-3 mr-1"}),"Pago"]});case"pending":return e.jsxs(p,{className:"bg-yellow-100 text-yellow-800",children:[e.jsx($,{className:"w-3 h-3 mr-1"}),"Pendente"]});case"overdue":return e.jsxs(p,{className:"bg-red-100 text-red-800",children:[e.jsx(X,{className:"w-3 h-3 mr-1"}),"Vencido"]});case"cancelled":return e.jsxs(p,{className:"bg-gray-100 text-gray-800",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"Cancelado"]});default:return e.jsx(p,{variant:"secondary",children:s})}},n=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),j=s=>new Date(s).toLocaleDateString("pt-BR"),y=r.filter(s=>{const l=s.invoice_number.toLowerCase().includes(f.toLowerCase())||s.client_name.toLowerCase().includes(f.toLowerCase())||s.client_email?.toLowerCase().includes(f.toLowerCase()),le=v==="all"||s.status===v;return l&&le}),ee=()=>r.reduce((s,l)=>s+l.amount,0),se=()=>r.filter(s=>s.status==="paid").reduce((s,l)=>s+l.amount,0),ae=()=>r.filter(s=>s.status==="pending").reduce((s,l)=>s+l.amount,0),te=()=>r.filter(s=>s.status==="overdue").reduce((s,l)=>s+l.amount,0),ie=s=>{g(s)},q=s=>{u({title:"Download",description:`Fatura ${s.invoice_number} será baixada`})},L=s=>{u({title:"Envio",description:`Fatura ${s.invoice_number} será enviada por email`})},V=s=>{u({title:"Edição",description:`Editando fatura ${s.invoice_number}`})},re=s=>{confirm(`Tem certeza que deseja excluir a fatura ${s.invoice_number}?`)&&u({title:"Exclusão",description:`Fatura ${s.invoice_number} será excluída`})};return Q?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(a,{variant:"ghost",onClick:()=>N("/dashboard"),children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),e.jsx("div",{className:"w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"w-4 h-4 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Histórico de Faturas"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie todas as suas faturas"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(a,{variant:"outline",onClick:T,children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Atualizar"]}),e.jsxs(a,{children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Nova Fatura"]})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total de Faturas"}),e.jsx(J,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n(ee())})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Pagas"}),e.jsx(b,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(s=>s.status==="paid").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n(se())})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Pendentes"}),e.jsx($,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.filter(s=>s.status==="pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n(ae())})]})]}),e.jsxs(d,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Vencidas"}),e.jsx(X,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.filter(s=>s.status==="overdue").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n(te())})]})]})]}),e.jsxs(d,{className:"mb-6",children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Filtros"]})}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"search",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(me,{id:"search",placeholder:"Número, cliente ou email...",value:f,onChange:s=>S(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"status",children:"Status"}),e.jsxs(z,{value:v,onValueChange:F,children:[e.jsx(M,{children:e.jsx(B,{placeholder:"Todos os status"})}),e.jsxs(R,{children:[e.jsx(i,{value:"all",children:"Todos"}),e.jsx(i,{value:"paid",children:"Pagas"}),e.jsx(i,{value:"pending",children:"Pendentes"}),e.jsx(i,{value:"overdue",children:"Vencidas"}),e.jsx(i,{value:"cancelled",children:"Canceladas"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"date",children:"Período"}),e.jsxs(z,{value:W,onValueChange:E,children:[e.jsx(M,{children:e.jsx(B,{placeholder:"Todos os períodos"})}),e.jsxs(R,{children:[e.jsx(i,{value:"all",children:"Todos"}),e.jsx(i,{value:"this_month",children:"Este mês"}),e.jsx(i,{value:"last_month",children:"Mês passado"}),e.jsx(i,{value:"this_year",children:"Este ano"}),e.jsx(i,{value:"last_year",children:"Ano passado"})]})]})]})]})})]}),e.jsxs(d,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Faturas"}),e.jsxs(A,{children:[y.length," fatura(s) encontrada(s)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(a,{variant:D==="list"?"default":"outline",size:"sm",onClick:()=>I("list"),children:"Lista"}),e.jsx(a,{variant:D==="grid"?"default":"outline",size:"sm",onClick:()=>I("grid"),children:"Grid"})]})]})}),e.jsx(o,{children:y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(H,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhuma fatura encontrada"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Não há faturas que correspondam aos filtros aplicados."}),e.jsx(a,{onClick:()=>{S(""),F("all"),E("all")},children:"Limpar Filtros"})]}):e.jsx("div",{className:"space-y-4",children:y.map(s=>e.jsx(d,{className:"hover:shadow-md transition-shadow",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s.invoice_number}),P(s.status)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(pe,{className:"w-3 h-3"}),e.jsx("span",{children:s.client_name})]}),s.client_email&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:s.client_email})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fe,{className:"w-3 h-3"}),e.jsx("span",{className:"font-medium",children:n(s.amount)})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(O,{className:"w-3 h-3"}),e.jsxs("span",{children:["Vencimento: ",j(s.due_date)]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(O,{className:"w-3 h-3"}),e.jsxs("span",{children:["Emissão: ",j(s.issue_date)]})]}),s.payment_date&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(b,{className:"w-3 h-3"}),e.jsxs("span",{children:["Pagamento: ",j(s.payment_date)]})]})]})]}),e.jsx("p",{className:"text-sm mt-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>ie(s),children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>q(s),children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>L(s),children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>V(s),children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>re(s),children:e.jsx(Ne,{className:"w-4 h-4"})})]})]})})},s.id))})})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(d,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(h,{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"w-5 h-5"}),e.jsxs("span",{children:["Fatura ",t.invoice_number]}),P(t.status)]}),e.jsx(A,{children:"Detalhes completos da fatura"})]}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>g(null),children:e.jsx(U,{className:"w-4 h-4"})})]})}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Informações do Cliente"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Nome"}),e.jsx("p",{className:"text-sm",children:t.client_name})]}),t.client_email&&e.jsxs("div",{children:[e.jsx(m,{children:"Email"}),e.jsx("p",{className:"text-sm",children:t.client_email})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Detalhes da Fatura"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Valor Total"}),e.jsx("p",{className:"text-lg font-semibold",children:n(t.amount)})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Data de Emissão"}),e.jsx("p",{className:"text-sm",children:j(t.issue_date)})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Data de Vencimento"}),e.jsx("p",{className:"text-sm",children:j(t.due_date)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Itens da Fatura"}),e.jsx("div",{className:"space-y-2",children:t.items.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.quantity," x ",n(s.unit_price)]})]}),e.jsx("p",{className:"font-semibold",children:n(s.total)})]},s.id))})]}),t.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Observações"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-lg",children:t.notes})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-4 border-t",children:[e.jsxs(a,{variant:"outline",onClick:()=>q(t),children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Baixar PDF"]}),e.jsxs(a,{variant:"outline",onClick:()=>L(t),children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Enviar por Email"]}),e.jsxs(a,{variant:"outline",onClick:()=>V(t),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Editar"]}),e.jsx(a,{onClick:()=>g(null),children:"Fechar"})]})]})]})})]})}export{Ze as default};
